window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#mail"),t=document.querySelector("#pass"),o=document.querySelector("#btnSend"),s=document.querySelectorAll("#passIcon");function n(e){const t=document.querySelector("#errorMessageGoogle");axios.post("http://localhost:8000/decodejwtgooglein",{token:e.credential}).then(e=>{e.data.token?(localStorage.setItem("token",e.data.token),location.href="../chat/index.html"):(t.innerHTML=e.data.message,t.classList.toggle("hide"),setTimeout(()=>{t.classList.toggle("hide")},4e3))}).catch(e=>{console.log(e)})}!function(){VK.init({apiId:7982119});const e=document.querySelector("#errorMessageGoogle");document.querySelector("#vk_auth").addEventListener("click",t=>{t.preventDefault(),VK.Auth.login((function(t){t.session?axios.post("http://localhost:8000/signinVK",{id:t.session.user.id}).then(t=>{t.data.token?(localStorage.setItem("token",t.data.token),location.href="../chat/index.html"):(e.innerHTML=t.data.message,e.classList.toggle("hide"),setTimeout(()=>{e.classList.toggle("hide")},4e3),VK.Auth.logout())}).catch(e=>{console.log(e)}):console.log(1)}))})}(),window.fbAsyncInit=function(){FB.init({appId:"394717829027741",cookie:!0,xfbml:!0,version:"v1.0"}),FB.AppEvents.logPageView()},document.querySelector("#fb_auth").addEventListener("click",e=>{e.preventDefault(),FB.login((function(e){e.authResponse.userID?axios.post("http://localhost:8000/signinFB",{id:e.authResponse.userID}).then(e=>{e.data.token?(localStorage.setItem("token",e.data.token),location.href="../chat/index.html"):(errorMessage.innerHTML=e.data.message,errorMessage.classList.toggle("hide"),setTimeout(()=>{errorMessage.classList.toggle("hide")},4e3),FB.logout())}).catch(e=>{console.log(e)}):console.log(1)}))}),google.accounts.id.initialize({client_id:"341269728044-13kn13rnm4k57nvj2n7mi73q9od4docv",callback:n}),google.accounts.id.renderButton(document.getElementById("buttonDiv"),{type:"icon"}),t.addEventListener("input",()=>{t.value.length>0&&e.value.length>0?o.removeAttribute("disabled"):o.setAttribute("disabled","disabled")}),e.addEventListener("input",()=>{t.value.length>0&&e.value.length>0?o.removeAttribute("disabled"):o.setAttribute("disabled","disabled")}),s.forEach((e,o)=>{e.addEventListener("click",()=>{e.classList.toggle("icon-hide"),0===o?(s[1].classList.toggle("icon-hide"),t.setAttribute("type","text")):(s[0].classList.toggle("icon-hide"),t.setAttribute("type","password"))})}),o.addEventListener("click",s=>{s.preventDefault(),o.setAttribute("disabled","disabled");const n=document.querySelector("#newLoader"),i=e.value,a=t.value,l=document.querySelector("#errorMessage");document.querySelectorAll(".signin__formItem");n.classList.toggle("hide"),axios.post("http://localhost:8000/signin",{mailOrLogin:i,password:a}).then((function(e){o.removeAttribute("disabled"),n.classList.toggle("hide"),e.data.token?(localStorage.setItem("token",e.data.token),location.href="../chat/index.html"):(l.innerHTML=e.data.message,l.classList.toggle("hide"),setTimeout(()=>{l.classList.toggle("hide")},4e3))})).catch((function(e){console.log(e)}))})});