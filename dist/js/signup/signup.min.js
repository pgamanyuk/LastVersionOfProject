window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector("#mail"),t=document.querySelector("#login"),s=document.querySelector("#pass"),a=document.querySelector("#confirmPass"),i=document.querySelector("#btnSend"),d=document.querySelector("#mailError"),l=document.querySelector("#passError"),o=document.querySelector("#passMatchError"),n=document.querySelector("#errorMessage");e.addEventListener("blur",()=>{/\S+@\S+\.\S+/.test(e.value)||d.classList.remove("hide")},!0),e.addEventListener("focus",()=>{d.classList.add("hide")},!0),e.addEventListener("input",()=>{d.classList.contains("hide")&&l.classList.contains("hide")&&o.classList.contains("hide")&&e.value&&s.value&&t.value&&s.value===a.value?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled")}),s.addEventListener("blur",()=>{/(?=.*[0-9])(?=.*[A-Z])[0-9a-zA-Z]{8,}/g.test(s.value)||l.classList.remove("hide")},!0),s.addEventListener("focus",()=>{l.classList.add("hide")},!0),s.addEventListener("input",()=>{d.classList.contains("hide")&&l.classList.contains("hide")&&o.classList.contains("hide")&&e.value&&s.value&&t.value&&s.value===a.value?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled")}),a.addEventListener("blur",()=>{s.value!==a.value&&o.classList.remove("hide")},!0),a.addEventListener("focus",()=>{o.classList.add("hide")},!0),a.addEventListener("input",()=>{d.classList.contains("hide")&&l.classList.contains("hide")&&o.classList.contains("hide")&&e.value&&s.value&&t.value&&s.value===a.value?i.removeAttribute("disabled"):i.setAttribute("disabled","disabled")});const r=document.querySelectorAll(".passwordIcon");console.log(r),r.forEach((e,t)=>{e.addEventListener("click",()=>{e.classList.toggle("icon-hide"),0===t?(r[1].classList.toggle("icon-hide"),s.setAttribute("type","text"),a.setAttribute("type","text")):(r[0].classList.toggle("icon-hide"),s.setAttribute("type","password"),a.setAttribute("type","password"))})}),i.addEventListener("click",i=>{i.preventDefault(),n.classList.add("hide");const d=e.value,l=t.value,o=s.value,r=(a.value,document.querySelector("#newLoader"));r.classList.toggle("hide"),axios.post("https://stark-lake-56522.herokuapp.com/signup",{mail:d,password:o,login:l}).then((function(e){r.classList.toggle("hide"),"string"!=typeof e.data?(localStorage.setItem("token",e.data.token),location.href="../profile/index.html"):(n.innerHTML=e.data,n.classList.remove("hide"))})).catch((function(e){console.log(e),r.classList.toggle("hide"),alert("Pizdariki")}))})});